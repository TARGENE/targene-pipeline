<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Overview · TarGene</title><meta name="title" content="Overview · TarGene"/><meta property="og:title" content="Overview · TarGene"/><meta property="twitter:title" content="Overview · TarGene"/><meta name="description" content="Documentation for TarGene."/><meta property="og:description" content="Documentation for TarGene."/><meta property="twitter:description" content="Documentation for TarGene."/><meta property="og:url" content="https://TARGENE.github.io/targene-pipeline/simulations/overview/"/><meta property="twitter:url" content="https://TARGENE.github.io/targene-pipeline/simulations/overview/"/><link rel="canonical" href="https://TARGENE.github.io/targene-pipeline/simulations/overview/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">TarGene</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../examples/setup/">Setup: Read First</a></li><li><a class="tocitem" href="../../examples/gwas/">GWAS</a></li><li><a class="tocitem" href="../../examples/phewas/">PheWAS</a></li><li><a class="tocitem" href="../../examples/interactions/">Interaction Study</a></li></ul></li><li><span class="tocitem">User Guide</span><ul><li><a class="tocitem" href="../../overview/">Nextflow Basics</a></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">The Discovery Workflow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../targene/overview/">Overview</a></li><li><a class="tocitem" href="../../targene/data_sources/">Genetic and Traits Data</a></li><li><a class="tocitem" href="../../targene/confounding_adjustment/">PCA Adjustment</a></li><li><a class="tocitem" href="../../targene/study_designs/">Defining the Estimands of Interest</a></li><li><a class="tocitem" href="../../targene/tmle/">Specifying a Targeted Estimator</a></li><li><a class="tocitem" href="../../targene/sieve_variance/">Correcting for population relatedness</a></li><li><a class="tocitem" href="../../targene/miscellaneous/">Final Tweaks</a></li><li><a class="tocitem" href="../../targene/configuration/">Index of Discovery Workflow Parameters</a></li><li><a class="tocitem" href="../../targene/runtime_considerations/">Some Runtime considerations</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">The Simulation Workflows (Experimental)</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Overview</a><ul class="internal"><li><a class="tocitem" href="#Bootstrap-Size"><span>Bootstrap Size</span></a></li><li><a class="tocitem" href="#Simulation-Tasks"><span>Simulation Tasks</span></a></li><li><a class="tocitem" href="#Estimators"><span>Estimators</span></a></li><li><a class="tocitem" href="#Estimands"><span>Estimands</span></a></li></ul></li><li><a class="tocitem" href="../null_simulation/">Null Simulation</a></li><li><a class="tocitem" href="../realistic_simulation/">Realistic Simulation</a></li></ul></li></ul></li><li><span class="tocitem">Secondary Workflows</span><ul><li><a class="tocitem" href="../../secondary_workflows/pca/">The PCA Workflow</a></li><li><a class="tocitem" href="../../secondary_workflows/make_dataset/">The Make Dataset Workflow</a></li></ul></li><li><span class="tocitem">Developper Guide</span><ul><li><a class="tocitem" href="../../developer_guide/project_organization/">Project Organization</a></li><li><a class="tocitem" href="../../developer_guide/contribution_guide/">Contributing</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User Guide</a></li><li><a class="is-disabled">The Simulation Workflows (Experimental)</a></li><li class="is-active"><a href>Overview</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Overview</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/TARGENE/targene-pipeline/blob/main/docs/src/simulations/overview.md#" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h1><p>The <strong>asymptotic</strong> performance of semi-parametric estimators is theoretically optimal. However, in practice, asymptotic regimes are not necessarily achieved even for large sample sizes because some events are extremely rare. This is particularly prevalent in population genetics where some genetic variants and traits are found in less than <span>$1\%$</span> of individuals. In the absence of finite sample guarantees, simulation studies provide an effective way to validate statistical methods. An ideal simulation would both yield ground-truth values for the causal effects of interest and be representative of real data. In TarGene, we propose two types of simulations to analyse the performance of semi-parametric estimators.</p><p>The first type of simulations, called the null simulation, aims at analysing the behaviour of the estimators when the null hypothesis of &quot;no effect&quot; is true. The rationale behind this simulation is that most genetic variants are believed to have no effect, it is thus of particular importance that the type 1 error rate be controlled appropriately.</p><p>The second type of simulations, called the realistic simulation, fits the generating process using data-adaptive flexible machine-learning generative models. As such, it retains important features of the true generating process, but also provides ground truth values via Monte-Carlo sampling.</p><h2 id="Bootstrap-Size"><a class="docs-heading-anchor" href="#Bootstrap-Size">Bootstrap Size</a><a id="Bootstrap-Size-1"></a><a class="docs-heading-anchor-permalink" href="#Bootstrap-Size" title="Permalink"></a></h2><p>Both simulations rely on bootstrap sampling, that is, we resample the dataset <span>$B$</span> times to obtain the sampling distribution of the estimators. This is computationally expensive since machine learning models need to be fitted for each bootstrap sample. In order to maximise parallelisation opportunities offered by HPCs, instead of specifying <code>B</code>, we specify two parameters: <code>N_REPEATS (default: 2)</code> and <code>RNGS (default: 1..250)</code>. For each rng in <code>RNGS</code>, a single process performing <code>N_REPEATS</code> bootstrap will be run. Thus, we effectively have <span>$B = N_REPEATS \times length(RNGS)$</span>. For example the default uses <span>$B=500$</span> bootstrap samples, but if we let <code>N_REPEATS=10</code> and <code>RNGS=1..250</code>, then <span>$B=2500$</span>.</p><h2 id="Simulation-Tasks"><a class="docs-heading-anchor" href="#Simulation-Tasks">Simulation Tasks</a><a id="Simulation-Tasks-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-Tasks" title="Permalink"></a></h2><p>We are interested in the performance of estimators for various estimands, but also potentially for various sample sizes. The triple (sample size, estimator, estimand), thus defines a simulation unit or task. In other words, <span>$B$</span> bootstrap samples will be run for each task defined by the cartesian product of all sample sizes, estimators and estimands, hence defining the total simulation scope.</p><h3 id="Sample-Sizes"><a class="docs-heading-anchor" href="#Sample-Sizes">Sample Sizes</a><a id="Sample-Sizes-1"></a><a class="docs-heading-anchor-permalink" href="#Sample-Sizes" title="Permalink"></a></h3><p>For each sample size in <code>SAMPLE_SIZES (default: [500000])</code>, the dataset is resampled with replacement according to the processes defined in the next sections. For example if <code>SAMPLE_SIZES = [1000, 500000]</code>, the estimators will be evaluated against all estimands for both sample sizes.</p><h2 id="Estimators"><a class="docs-heading-anchor" href="#Estimators">Estimators</a><a id="Estimators-1"></a><a class="docs-heading-anchor-permalink" href="#Estimators" title="Permalink"></a></h2><p>Like for a normal discovery run, the set of estimators to be evaluated is defined by the <code>ESTIMATORS_CONFIG</code> parameter, which in this case can be a list. For example if <code>ESTIMATORS_CONFIG = [&quot;wtmle-ose--glm&quot;, &quot;wtmle-ose--tunedxgboost&quot;]</code>, a total of 4 estimators will actually be evaluated:</p><ul><li>wTMLE with a GLM for both <span>$Q_Y$</span> and <span>$G$</span></li><li>OSE with a GLM for both <span>$Q_Y$</span> and <span>$G$</span></li><li>wTMLE with a cross-validated XGBoost for both <span>$Q_Y$</span> and <span>$G$</span></li><li>OSE with a cross-validated XGBoost for both <span>$Q_Y$</span> and <span>$G$</span></li></ul><p>For more information on defining estimators, have a look at the <a href="../../targene/tmle/#Specifying-a-Targeted-Estimator">Specifying a Targeted Estimator</a> section.</p><h2 id="Estimands"><a class="docs-heading-anchor" href="#Estimands">Estimands</a><a id="Estimands-1"></a><a class="docs-heading-anchor-permalink" href="#Estimands" title="Permalink"></a></h2><p>Finally, the set of estimands is provided via the <code>ESTIMANDS_CONFIG</code> which should be a list of estimands like in the <a href="../../targene/study_designs/#Custom-(Advanced)">Custom (Advanced)</a> section.</p><p>Easier ways to describe estimands may be added in the future but note that given the computational complexity of these simulations, a genome-wide simulation is currently unrealistic.</p><div class="admonition is-info"><header class="admonition-header">Number of Estimands</header><div class="admonition-body"><p>Keep it small to start with, at the moment experiments have been run with around 30 different genetic effects.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../targene/runtime_considerations/">« Some Runtime considerations</a><a class="docs-footer-nextpage" href="../null_simulation/">Null Simulation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Wednesday 4 September 2024 16:13">Wednesday 4 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
