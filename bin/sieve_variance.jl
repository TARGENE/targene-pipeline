

using UKBBEpistasisPipeline
using ArgParse


function parse_commandline()
    s = ArgParseSettings(description="Compute the Sieve Variance Plateau estimate for each phenotype in the result file")

    @add_arg_table s begin
        "results"
            help = "Path to the .hdf5 file generated by TMLEEpistasis `ukbb.jl` script"
            arg_type = String
            required = true
        "grm-prefix"
            arg_type = String
            help = "Prefix of the GRM as output by `grm_from_gcta.jl`"
            required = true
        "--nb-estimators", "-n"
            arg_type = Int
            help = "Number of variance estimators to compute"
            default = 10
        
    end

    return parse_args(s)
end


parsed_args = parse_commandline()

sieve_variance_plateau(parsed_args)
